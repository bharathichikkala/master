<app-error500 [errorname]="serviceErrorResponse" *ngIf="serviceErrorData"></app-error500>
<div [hidden]="serviceErrorData" id="content">
  <sa-widgets-grid>
    <div class="row">
      <div class="col-sm-12">

        <!-- MAIN CONTENT -->
        <sa-widget [editbutton]="false" [fullscreenbutton]="false" [collapsed]="false" [colorbutton]="false" [togglebutton]="false"
          color="blueDark">
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Add User</h2>
          </header>
          <div class="widget-body">
            <form [formGroup]="complexForm" method="post" *ngIf="userDetails" id="checkout-form" class="smart-form">

              <fieldset>


                <section *ngIf="userError" class="icon-color-bad text-center"> {{userError}} </section>
                <section *ngIf="userSuccess" class="text-success text-center"> {{userSuccess}} </section>



                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="username" [ngClass]="{'has-error':! this.username.valid &&  this.username}" style="font-weight: 600;">Username
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <!-- <i class="icon-prepend fa fa-user">  </i>-->
                    <label class="input form-control">
                      <input type="text" name="username" [formControl]="this.username" [(ngModel)]="userDetails.name" placeholder="Username">
                      <span *ngIf=" this.username.hasError('required') &&submitted  " class=" icon-color-bad ">Please enter username</span>

                      <span *ngIf=" this.username.hasError('minlength')|| this.username.hasError('maxlength')||this.username.hasError('pattern') "
                        class=" icon-color-bad ">Please enter valid name between 3 to 32 characters only</span>
                    </label>
                  </section>
                </div>

                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="email" [ngClass]="{'has-error':! this.email.valid &&  this.email}" style="font-weight: 600;">Email
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <!-- <i class="icon-prepend fa fa-envelope-o">  </i>-->
                  <section class="col col-4">
                    <label class="input form-control">
                      <input type="email" [(ngModel)]="userDetails.email" name="email" [formControl]="this.email" placeholder="Email">
                      <span *ngIf=" this.email.hasError('required') &&submitted  " class=" icon-color-bad ">Please enter email</span>

                      <span *ngIf=" this.email.hasError('pattern') " class=" icon-color-bad">Please enter valid email</span>
                    </label>
                  </section>
                </div>


                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="phone" [ngClass]="{'has-error':! this.phone.valid &&  this.phone}" style="font-weight: 600;">Phone
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <!-- <i class="icon-prepend fa fa-phone"> </i>-->
                    <label class="input form-control">
                      <input type="tel" [formControl]="this.phone" [(ngModel)]="userDetails.phone" name="phone" placeholder="Phone" data-smart-masked-input="(999) 999-9999">

                      <span *ngIf=" this.phone.hasError('required') &&submitted  " class=" icon-color-bad ">Please enter phone number</span>

                      <span *ngIf=" this.phone.hasError('pattern') " class=" icon-color-bad ">Please enter valid phone number</span>
                    </label>
                  </section>
                </div>

                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" style="font-weight: 600;">Role
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <label class="select form-control">
                      <select name="roles" [formControl]="this.roles" [(ngModel)]="datauserRoles" placeholder="SELECT">
                        <option disabled value='' disabled>Select role</option>
                        <!--<option *ngFor="let userType of userTypeRoles"value="userType.name"  >{{userType.name}}</option>-->
                        <option value="ADMIN">ADMIN</option>
                        <option value="USER">USER</option>
                        <!-- <option value="{{roles.name}}" >{{roles.name}}</option> -->
                      </select>
                    </label>
                  </section>
                </div>

              </fieldset>

              <footer>
                <section class="col col-6">
                  <button class="btn  btn-warning btn-sm" type="submit" (click)="cancelUser()">Cancel</button>
                  <button class="btn  btn-success btn-sm" type="submit" [disabled]="!complexForm.valid" (click)="addUser(userDetails)">
                    Add
                  </button>
                </section>
              </footer>
            </form>

          </div>
        </sa-widget>
      </div>
    </div>
  </sa-widgets-grid>
</div>

<div id="content">
  <div style="font-weight:bold"><span routerLink="/users"
      style="cursor: pointer;color: #335CA7;text-decoration: underline;">Users List</span> <span> / Add User</span>
  </div><br>
  <sa-widgets-grid>

    <div class="row">
      <div class="col-sm-12">

        <!-- MAIN CONTENT -->
        <sa-widget [sortable]="false" [togglebutton]="false" [editbutton]="false" [fullscreenbutton]="false"
          [colorbutton]="false" [deletebutton]="false" saSparklineContainer saEasyPieChartContainer color="blueDark">
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Add User</h2>
          </header>
          <div class="widget-body">
            <form [formGroup]="complexForm" method="post" *ngIf="userDetails" id="checkout-form" class="smart-form">
              <fieldset>
                <section *ngIf="userError" class="icon-color-bad text-center"> {{userError}} </section>
                <section *ngIf="userSuccess" class="text-success text-center"> {{userSuccess}} </section>
                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="username"
                      [ngClass]="{'has-error':! this.username.valid &&  this.username}"
                      style="font-weight: 600;">Username
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <label class="input form-control">
                      <input type="text" name="username" [formControl]="this.username" [(ngModel)]="userDetails.name"
                        placeholder="Username">
                      <span *ngIf=" this.username.hasError('required') &&submitted  " class=" icon-color-bad ">Please
                        enter username</span>
                      <span
                        *ngIf=" this.username.hasError('minlength')|| this.username.hasError('maxlength')||this.username.hasError('pattern') "
                        class=" icon-color-bad ">Please enter valid name between 3 to 32 characters only</span>
                    </label>
                  </section>
                </div>
                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="email" [ngClass]="{'has-error':! this.email.valid &&  this.email}"
                      style="font-weight: 600;">Email
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <label class="input form-control">
                      <input type="email" [(ngModel)]="userDetails.email" name="email" [formControl]="this.email"
                        placeholder="Email">
                      <span *ngIf=" this.email.hasError('required') &&submitted  " class=" icon-color-bad ">Please enter
                        email</span>
                      <span *ngIf=" this.email.hasError('pattern') " class=" icon-color-bad">Please enter valid
                        email</span>
                    </label>
                  </section>
                </div>
                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" for="phone" [ngClass]="{'has-error':! this.phone.valid &&  this.phone}"
                      style="font-weight: 600;">Phone
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="col col-4">
                    <label class="input form-control">
                      <input type="tel" [formControl]="this.phone" [(ngModel)]="userDetails.phone" name="phone"
                        placeholder="Phone" data-smart-masked-input="(999) 999-9999">
                      <span *ngIf=" this.phone.hasError('required') &&submitted  " class=" icon-color-bad ">Please enter
                        phone number</span>
                      <span *ngIf=" this.phone.hasError('pattern') " class=" icon-color-bad ">Please enter valid phone
                        number</span>
                    </label>
                  </section>
                </div>
                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" style="font-weight: 600;">Role
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="form-group col col-4">
                    <label class="form-control">
                      <select name="roles" [formControl]="this.roles" [(ngModel)]="selectedUserRoleName"
                        placeholder="SELECT" class="form-control ng-pristine ng-valid ng-touched">
                        <option disabled value=''>Select role</option>
                        <option *ngFor="let userType of userTypeRoles" value="userType.name"
                          [disabled]='userType.name=="SUPERADMIN"' value="{{userType.name}}">{{userType.name}}</option>
                      </select>
                      <i></i>
                    </label>
                    <span *ngIf=" this.roles.hasError('required') &&submitted  " class=" icon-color-bad ">Please Select
                      Role</span>
                  </section>
                </div>
                <div class="row">
                  <section class="col col-2" style="margin-bottom: 0px;margin-top: 5px;">
                    <label class="label" style="font-weight: 600;">Facility
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class="form-group col col-8" style='margin-left: -14px;width: 70%;'>
                    <div style="border: #335CA7" class="col col-6">
                      <select id='f' placeholder="SELECT" style='border: outset;' class="select2 form-control"
                        multiple="true" select2 style="width:100%">
                        <option *ngFor="let facl of facilityList" [value]="facl.id">
                          {{facl.facility}}
                        </option>
                      </select>
                      <span *ngIf="this.facilityLength<1 && submitted" class=" icon-color-bad ">Please
                        Select Facility</span>
                    </div>
                    <!-- </div> -->
                    <!-- <select name="facl" [formControl]="this.facility" [(ngModel)]="selectedFacilityId"
                        placeholder="SELECT" class="form-control ng-pristine ng-valid ng-touched">
                        <option disabled value='' disabled>Select facility</option>
                        <option *ngFor="let facl of facilityList" value="facl.id" value="{{facl.id}}">{{facl.name}}
                        </option>
                      </select> -->
                    <i></i>
                  </section>
                </div>
                <div class="row">
                  <section class="col col-2">
                    <label class="label" for="notification"
                      [ngClass]="{'has-error':! this.notification.valid &&  this.notification}"
                      style="font-weight: 600;">Notifications
                      <font class="icon-color-bad">*</font>
                    </label>
                  </section>
                  <section class=" form-group col col-4" style="margin-left: 22px;">
                    <label class="checkbox-inline">
                      <input type="checkbox" [formControl]="notification" [checked]='this.yes'
                        (click)='notificationChecked($event)' class="checkbox">
                      <span>YES</span>
                    </label>
                    <label style='margin-left: 36px;' class="checkbox-inline">
                      <input type="checkbox" [formControl]="notification" [checked]='this.no'
                        (click)='notificationChecked1($event)' class="checkbox">
                      <span>NO</span>
                    </label><br>
                    <span *ngIf=" this.notification.hasError('required') &&submitted ">
                      <span class="icon-color-bad" style='float: left;margin-left: -21px;'
                        *ngIf=" this.notification.hasError('required') &&submitted ">Please
                        select Notification</span>
                    </span>

                  </section>
                </div>
              </fieldset>

              <footer>
                <section class="col col-6">

                  <button *ngIf="loading" class="btn  btn-success btn-sm" type="submit" (click)="addUser(userDetails)">
                    <span>Add</span>
                  </button>
                  <button *ngIf="!loading" class="btn  btn-success btn-sm" type="submit"><span><i
                        class="fa fa-cog fa-spin"></i>
                      Loading....</span></button>
                  <button class="btn  btn-warning btn-sm" (click)="cancelUser()">Cancel</button>
                </section>
              </footer>
            </form>
          </div>
        </sa-widget>
      </div>
    </div>
  </sa-widgets-grid>
</div>